(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,n,t){e.exports=t(40)},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(16),c=t.n(u),o=t(17),l=t(6),i=t(2),m=function(e){var n=e.text,t=e.submitHandler;return r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:t},n))},d=function(e){var n=e.text,t=e.value,a=e.changeHandler;return r.a.createElement("div",null,n,": ",r.a.createElement("input",{value:t,onChange:a}))},f=function(e){var n=e.newName,t=e.newNumber,a=e.handleNameChange,u=e.handleNumberChange,c=e.handleSubmit;return r.a.createElement("form",null,r.a.createElement(d,{text:"Name",value:n,changeHandler:a}),r.a.createElement(d,{text:"Number",value:t,changeHandler:u}),r.a.createElement(m,{text:"Add",submitHandler:c}))},s=function(e){var n=e.persons,t=e.handleDelete;return n.map((function(e){return r.a.createElement("div",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return t(e)}},"Delete"))}))},b=function(e){var n=e.message,t=e.color,a={color:t,backgroundColor:"lightgrey",border:"1px solid ".concat(t)};return null===n?null:r.a.createElement("div",{style:a},n)},h=t(4),v=t.n(h),p="/api/persons",E=function(e){return v.a.post(p,e).then((function(e){return e.data}))},g=function(){return v.a.get(p).then((function(e){return e.data}))},j=function(e){return v.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},O=function(e,n){return v.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),m=Object(i.a)(c,2),h=m[0],v=m[1],p=Object(a.useState)(t),w=Object(i.a)(p,2),N=w[0],k=w[1],S=Object(a.useState)(""),x=Object(i.a)(S,2),C=x[0],y=x[1],D=Object(a.useState)(""),H=Object(i.a)(D,2),A=H[0],T=H[1],I=Object(a.useState)(null),J=Object(i.a)(I,2),B=J[0],F=J[1],P=Object(a.useState)(null),U=Object(i.a)(P,2),q=U[0],z=U[1];Object(a.useEffect)((function(){g().then((function(e){u(e)}))}),[]);var G=function(e){window.confirm("Delete ".concat(e.name,"?"))&&j(e.id).then((function(){u(t.filter((function(n){return n.id!==e.id}))),v("")}))},K=function(){v(""),y(""),T("")};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:B,color:q}),r.a.createElement(d,{text:"Filter shown with",value:h,changeHandler:function(e){var n=e.target.value;v(n),k(t.filter((function(e){return e.name.includes(n)})))}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(f,{newName:C,newNumber:A,handleNameChange:function(e){y(e.target.value)},handleNumberChange:function(e){T(e.target.value)},handleSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===C}))){if(!window.confirm("".concat(C," is already added to phonebook, replace the old number with a new one?")))return;var n=t.find((function(e){return e.name===C})),a=Object(l.a)(Object(l.a)({},n),{},{number:A});O(n.id,a).then((function(e){u(t.map((function(n){return n.id===e.id?e:n}))),K(),z("green"),F("Updated ".concat(C)),setTimeout((function(){return F(null)}),3e3)})).catch((function(e){z("red"),F("Information of ".concat(C," has already been removed from server")),setTimeout((function(){return F(null)}),3e3)}))}else{E({name:C,number:A}).then((function(e){u([].concat(Object(o.a)(t),[e])),K(),z("green"),F("Added ".concat(C)),setTimeout((function(){return F(null)}),3e3)}))}}}),r.a.createElement("h2",null,"Numbers"),""===h?r.a.createElement(s,{persons:t,handleDelete:G}):r.a.createElement(s,{persons:N,handleDelete:G}))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.32771677.chunk.js.map